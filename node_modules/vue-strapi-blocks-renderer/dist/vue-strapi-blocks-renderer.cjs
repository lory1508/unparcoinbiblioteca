(function(l,n){typeof exports=="object"&&typeof module<"u"?n(exports,require("vue")):typeof define=="function"&&define.amd?define(["exports","vue"],n):(l=typeof globalThis<"u"?globalThis:l||self,n(l["vue-strapi-blocks-renderer"]={},l.Vue))})(this,function(l,n){"use strict";const f="vue-strapi-blocks-renderer",a=({componentsContext:e,text:t,...s})=>{const{modifiers:i,missingModifierTypes:o}=e;return Object.keys(s).reduce((c,r)=>{if(!s[r])return c;const d=i[r];return d?d({children:c}):(o.includes(r)||(console.warn(`[${f}] No component found for modifier "${r}"`),o.push(r)),c)},t)},y=["image"],g=e=>{const{children:t,type:s,...i}=e;if(s==="code"){const o=h=>h.reduce((c,r)=>r.type==="text"?c.concat(r.text):r.type==="link"?c.concat(o(r.children)):c,"");return{...i,plainText:o(e.children)}}return i},m=({content:e,componentsContext:t})=>{const{children:s,type:i,...o}=e,{blocks:h,missingBlockTypes:c}=t,r=h[i];if(!r)return c.includes(i)||(console.warn(`[${f}] No component found for block type "${i}"`),c.push(i)),null;if(y.includes(i))return r(o);if(i==="paragraph"&&s.length===1&&s[0].type==="text"&&s[0].text==="")return n.h("br");const d=g(e),T=s.map(p=>{if(p.type==="text"){const{type:B,...b}=p;return a({componentsContext:t,...b})}return m({content:p,componentsContext:t})});return r({children:T,...d})},u={blocks:{paragraph:e=>n.h("p",{},e.children),quote:e=>n.h("blockquote",{},e.children),code:e=>n.h("pre",{},[n.h("code",{},e.plainText)]),heading:({level:e,children:t})=>{switch(e){case 1:return n.h("h1",{},t);case 2:return n.h("h2",{},t);case 3:return n.h("h3",{},t);case 4:return n.h("h4",{},t);case 5:return n.h("h5",{},t);case 6:return n.h("h6",{},t)}},link:e=>n.h("a",{href:e.url},e.children),list:e=>{const t=e.format==="ordered";return n.h(t?"ol":"ul",{},e.children)},"list-item":e=>n.h("li",{},e.children),image:({image:e})=>n.h("img",{src:e.url,alt:e.alternativeText||void 0})},modifiers:{bold:e=>n.h("strong",{},e.children),italic:e=>n.h("em",{},e.children),underline:e=>n.h("u",{},e.children),strikethrough:e=>n.h("del",{},e.children),code:e=>n.h("code",{},e.children)},missingBlockTypes:[],missingModifierTypes:[]},k=e=>{const t={...u.blocks,...e.blocks},s={...u.modifiers,...e.modifiers},i={blocks:t,modifiers:s,missingBlockTypes:[],missingModifierTypes:[]};if(!e.content)throw new Error("BlocksRenderer content is empty");const o=e.content.map(h=>m({content:h,componentsContext:i}));return i.missingBlockTypes.length&&o.unshift(n.h(n.Comment,`missingBlockTypes: ${i.missingBlockTypes}`)),i.missingModifierTypes.length&&o.unshift(n.h(n.Comment,`missingModifierTypes: ${i.missingModifierTypes}`)),n.h(n.Fragment,o)};l.StrapiBlocks=k,Object.defineProperty(l,Symbol.toStringTag,{value:"Module"})});
